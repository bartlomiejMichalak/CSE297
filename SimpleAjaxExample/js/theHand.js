var setArray = new Array();
var imgArray = new Array();
var counter = 0;
// alert("...ready");
//imgArray[0] = new Image();
//imgArray[0].src = 'images/01.gif';
//imgArray[1] = new Image();
//imgArray[1].src = 'images/02.gif';
//imgArray[2] = new Image();
//imgArray[2].src = 'images/03.gif';
//imgArray[3] = new Image();
//imgArray[3].src = 'images/04.gif';
//imgArray[4] = new Image();
//imgArray[4].src = 'images/05.gif';
//imgArray[5] = new Image();
//imgArray[5].src = 'images/06.gif';
//imgArray[6] = new Image();
//imgArray[6].src = 'images/07.gif';
//imgArray[7] = new Image();
//imgArray[7].src = 'images/08.gif';
//imgArray[8] = new Image();
//imgArray[8].src = 'images/09.gif';
//imgArray[9] = new Image();
//imgArray[9].src = 'images/10.gif';
//imgArray[10] = new Image();
//imgArray[10].src = 'images/11.gif';
//imgArray[11] = new Image();
//imgArray[11].src = 'images/12.gif';
//imgArray[12] = new Image();
//imgArray[12].src = 'images/13.gif';
//imgArray[13] = new Image();
//imgArray[13].src = 'images/14.gif';
//imgArray[14] = new Image();
//imgArray[14].src = 'images/15.gif';
//imgArray[15] = new Image();
//imgArray[15].src = 'images/16.gif';
//imgArray[16] = new Image();
//imgArray[16].src = 'images/17.gif';
//imgArray[17] = new Image();
//imgArray[17].src = 'images/18.gif';
//imgArray[18] = new Image();
//imgArray[18].src = 'images/19.gif';
//imgArray[19] = new Image();
//imgArray[19].src = 'images/20.gif';
//imgArray[20] = new Image();
//imgArray[20].src = 'images/21.gif';
//imgArray[21] = new Image();
//imgArray[21].src = 'images/22.gif';
//imgArray[22] = new Image();
//imgArray[22].src = 'images/23.gif';
//imgArray[23] = new Image();
//imgArray[23].src = 'images/24.gif';
//imgArray[24] = new Image();
//imgArray[24].src = 'images/25.gif';
//imgArray[25] = new Image();
//imgArray[25].src = 'images/26.gif';
//imgArray[26] = new Image();
//imgArray[26].src = 'images/27.gif';
//imgArray[27] = new Image();
//imgArray[27].src = 'images/28.gif';
//imgArray[28] = new Image();
//imgArray[28].src = 'images/29.gif';
//imgArray[29] = new Image();
//imgArray[29].src = 'images/30.gif';
//imgArray[30] = new Image();
//imgArray[30].src = 'images/31.gif';
//imgArray[31] = new Image();
//imgArray[31].src = 'images/32.gif';
//imgArray[32] = new Image();
//imgArray[32].src = 'images/33.gif';
//imgArray[33] = new Image();
//imgArray[33].src = 'images/34.gif';
//imgArray[34] = new Image();
//imgArray[34].src = 'images/35.gif';
//imgArray[35] = new Image();
//imgArray[35].src = 'images/36.gif';
//imgArray[36] = new Image();
//imgArray[36].src = 'images/37.gif';
//imgArray[37] = new Image();
//imgArray[37].src = 'images/38.gif';
//imgArray[38] = new Image();
//imgArray[38].src = 'images/39.gif';
//imgArray[39] = new Image();
//imgArray[39].src = 'images/40.gif';
//imgArray[40] = new Image();
//imgArray[40].src = 'images/41.gif';
//imgArray[41] = new Image();
//imgArray[41].src = 'images/42.gif';
//imgArray[42] = new Image();
//imgArray[42].src = 'images/43.gif';
//imgArray[43] = new Image();
//imgArray[43].src = 'images/44.gif';
//imgArray[44] = new Image();
//imgArray[44].src = 'images/45.gif';
//imgArray[45] = new Image();
//imgArray[45].src = 'images/46.gif';
//imgArray[46] = new Image();
//imgArray[46].src = 'images/47.gif';
//imgArray[47] = new Image();
//imgArray[47].src = 'images/48.gif';
//imgArray[48] = new Image();
//imgArray[48].src = 'images/49.gif';
//imgArray[49] = new Image();
//imgArray[49].src = 'images/50.gif';
//imgArray[50] = new Image();
//imgArray[50].src = 'images/51.gif';
//imgArray[51] = new Image();
//imgArray[51].src = 'images/52.gif';
//imgArray[52] = new Image();
//imgArray[52].src = 'images/53.gif';
//imgArray[53] = new Image();
//imgArray[53].src = 'images/54.gif';
//imgArray[54] = new Image();
//imgArray[54].src = 'images/55.gif';
//imgArray[55] = new Image();
//imgArray[55].src = 'images/56.gif';
//imgArray[56] = new Image();
//imgArray[56].src = 'images/57.gif';
//imgArray[57] = new Image();
//imgArray[57].src = 'images/58.gif';
//imgArray[58] = new Image();
//imgArray[58].src = 'images/59.gif';
//imgArray[59] = new Image();
//imgArray[59].src = 'images/60.gif';
//imgArray[60] = new Image();
//imgArray[60].src = 'images/61.gif';
//imgArray[61] = new Image();
//imgArray[61].src = 'images/62.gif';
//imgArray[62] = new Image();
//imgArray[62].src = 'images/63.gif';
//imgArray[63] = new Image();
//imgArray[63].src = 'images/64.gif';
//imgArray[64] = new Image();
//imgArray[64].src = 'images/65.gif';
//imgArray[65] = new Image();
//imgArray[65].src = 'images/66.gif';
//imgArray[66] = new Image();
//imgArray[66].src = 'images/67.gif';
//imgArray[67] = new Image();
//imgArray[67].src = 'images/68.gif';
//imgArray[68] = new Image();
//imgArray[68].src = 'images/69.gif';
//imgArray[69] = new Image();
//imgArray[69].src = 'images/70.gif';
//imgArray[70] = new Image();
//imgArray[70].src = 'images/71.gif';
//imgArray[71] = new Image();
//imgArray[71].src = 'images/72.gif';
//imgArray[72] = new Image();
//imgArray[72].src = 'images/73.gif';
//imgArray[73] = new Image();
//imgArray[73].src = 'images/74.gif';
//imgArray[74] = new Image();
//imgArray[74].src = 'images/75.gif';
//imgArray[75] = new Image();
//imgArray[75].src = 'images/76.gif';
//imgArray[76] = new Image();
//imgArray[76].src = 'images/77.gif';
//imgArray[77] = new Image();
//imgArray[77].src = 'images/78.gif';
//imgArray[78] = new Image();
//imgArray[78].src = 'images/79.gif';
//imgArray[79] = new Image();
//imgArray[79].src = 'images/80.gif';
//imgArray[80] = new Image();
//imgArray[80].src = 'images/81.gif';


$(document).ready(function() {


    for (var i = 0; i < 82; i++) {

        var tempImg = new Image();

        if (i < 10) {
            tempImg.src = "images/0" + i + ".gif";
            tempImg.class = "img";
            tempImg.id = i;
        }
        else {
            tempImg.src = "images/" + i + ".gif";
            tempImg.class = "img";
            tempImg.id = i;
        }
        imgArray[i - 1] = tempImg;
    }



    var socket = io.connect('http://tertullian.cse.lehigh.edu:3000');
    socket.on('hand', function(cards) {
        displayHand(cards);
    });
    socket.on('players', function(players) {
        loadStatus(players);
    });
});
function createHand() {
    var tempArray = new Array();
    for (var i = 0; i < 12; i++) {
        tempArray[i] = i + 1;
    }
    displayHand(tempArray);
}
;

//function displayHand(someArray) {
//
//    $("td").each(function(index, ele) {
//        $(ele).html('');
//        $(ele).append(imgArray[someArray[index]]);
//   });
//}
//;

function displayHand(someArray) {
    var numberOfCards = someArray.length;
    $("#myTable").html('');
    for (var i = 0; i < (numberOfCards / 3); i++) {
        $("#myTable").append("<tr> <td></td> <td></td> <td></td> </tr>");
    }
    $("td").each(function(index, ele) {
        $(ele).html('');
        $(ele).append(imgArray[someArray[index] - 1]);
        //imageid[index] = someArray[index];
    });
    $("img").click(toggleBorder);
}
;

function loadStatus(friends) {
    var x = friends.length;

    var score = new Array(x);
    var row = new Array(x);
    var shuffle = new Array(x);
    var end = new Array(x);

    for (var i = 0; i < friends.length; i++) {
        if (friends[i].score === true) {
            score[i] = "*";
        }
        else
            score[i] = "";

        if (friends[i].row === true) {
            row[i] = "*";
        }
        else
            row[i] = "";

        if (friends[i].shuffle === true) {
            shuffle[i] = "*";
        }
        else
            shuffle[i] = "";

        if (friends[i].end === true) {
            end[i] = "*";
        }
        else
            end[i] = "";
    }


    for (var i = 0; i < friends.length; i++) {
        $("#playerList tbody").append(
                "<tr>" +
                "<td>" +
                friends[i].player + "</td>" +
                "<td>" + friends[i].score + score[i] + "</td>" +
                "<td>" + friends[i].row + row[i] + "</td>" +
                "<td>" + friends[i].shuffle + shuffle[i] + "</td>" +
                "<td>" + friends[i].end + end[i] + "</td>" +
                "<td>" + friends[i].winner + "</td>" +
                +"</tr>");
    }
}
;

function toggleBorder() {
    var id = $(this).attr('id');

    if ($(this).hasClass("select")) {
        $(this).toggleClass("select");

        var limit = setArray.indexOf(id);

        if (limit > -1) {
            setArray.splice(limit, 1);
        }
        counter--;
    }
    else
    if (counter > 3) {
        alert("You have selected more than 3 cards.");
    }
    else {
        $(this).toggleClass("select");
        counter++;


        setArray.push(id);
    }
}
;

function setShuffle() {
    alert('shuffle recognized');
    $.ajax(
            "index.php",
            {
                type: "GET",
                processData: false,
                data: "cmd=shuffle",
                dataType: "json",
                success: function(json) {
                },
                error: function(jqXHR, textStatus, errorThrown) {
                }
            }
    );
}
;

function setRow() {

    //alert('setRow recognized');
    $.ajax(
            "index.php",
            {
                type: "GET",
                processData: false,
                data: "cmd=addRow",
                dataType: "json",
                success: function(json) {
                },
                error: function(jqXHR, textStatus, errorThrown) {

                }
            }
    );
}

function setEndGame() {

    //alert('setRow recognized');
    $.ajax(
            "index.php",
            {
                type: "GET",
                processData: false,
                data: "cmd=endGame",
                dataType: "json",
                success: function(json) {
                },
                error: function(jqXHR, textStatus, errorThrown) {

                }
            }
    );
}

function setButton() {

    if (counter !== 3) {
        alert('The Current array holds:' + counter);

    }
    else {
        $.ajax(
                "index.php?cmd=set",
                {
                    type: "GET",
                    data: {
                        'array': setArray
                    },
                    dataType: "json",
                    success: function() {
                        alert("epic win");
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                    }

                });
        counter = 0;
    }

}



